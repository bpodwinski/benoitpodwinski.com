var VizHandler=function(){var n,i,a,o,e,r,t=!1,s=window.innerWidth,d=window.innerHeight;function c(){a.shadowMap.needsUpdate=!0}function h(){o.update(),e&&(n.position.set(0,0,0),n.translateZ(1.8))}return{init:function(){var e=parseInt(window.location.hash.substr(1));e=e||1,ControlsHandler.fxParams.song=e,events.on("update",h),container=document.createElement("div"),document.body.appendChild(container),(a=new THREE.WebGLRenderer({antialias:!0})).setSize(s,d),a.setClearColor(0),a.shadowMap.enabled=!0,a.shadowMap.autoUpdate=!0,a.gammaInput=!0,a.gammaOutput=!0,container.appendChild(a.domElement),i=new THREE.Scene,(n=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,2e3)).position.y=2.5,n.position.z=2,i.fog=new THREE.Fog(0,1,8),(o=new THREE.OrbitControls(n)).target.set(0,0,0),o.update(),o.autoRotate=!1,o.enablePan=!1,o.enableZoom=!0,o.enableRotate=!1,o.enableDamping=!0,o.dampingFactor=.2,o.rotateSpeed=.5,Assets.init(),(r=new THREE.DirectionalLight(16777215,.5)).position.x=.8,r.position.z=-.9,r.position.y=.8,r.castShadow=!0,r.shadow.camera.near=-8,r.shadow.camera.far=8,r.shadow.camera.left=-4,r.shadow.camera.right=4,r.shadow.camera.top=4,r.shadow.camera.bottom=-4,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.bias=1e-4,hemiLight=new THREE.HemisphereLight(16777215,6710886,.6),hemiLight.color.setHSL(.6,1,.8),hemiLight.groundColor.setHSL(.095,1,.9),hemiLight.position.set(0,10,0),new THREE.CameraHelper(r.shadow.camera),i.add(r),activeViz=[Mecha],activeVizCount=activeViz.length;for(var t=0;t<activeVizCount;t++)activeViz[t].init();TweenMax.delayedCall(.1,c)},update:h,getCamera:function(){return n},getScene:function(){return i},getLight:function(){return r},getRenderer:function(){return a},getCubeCameras:function(){return[void 0,void 0]},getControls:function(){return o},onResize:function(){var e=1920,t=1080;if(ControlsHandler.vizParams.fullSize){e=window.innerWidth,t=window.innerHeight;ControlsHandler.vizParams.showControls&&(e-=250),$("#viz").css({position:"relative",top:0})}else $("#viz").css({position:"relative",top:window.innerHeight/2-FIXED_SIZE_H/2});n.aspect=e/t,n.updateProjectionMatrix(),a.setSize(e,t)},isFullscreen:function(){return t},isMobile:function(){return e}}}();
//# sourceMappingURL=VizHandler.js.map
