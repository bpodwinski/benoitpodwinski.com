var Shards=function(){var E,l;function a(){E&&(VizHandler.getScene().remove(E),E.geometry.dispose(),E=null);for(var e=new THREE.BoxGeometry(.1,.1,.1,1,1,1),a=new THREE.Object3D,n=0;n<400;n++){var t=15,r=new THREE.Vector3;0!=n&&r.set((Math.random()-.5)*t,(Math.random()-.5)*t,(Math.random()-.5)*t);for(var o=5*Math.random(),d=0;d<o;d++){var h=new THREE.Mesh(e,l);t=.2+.4*Math.random();h.position.set((Math.random()-.5)*t,(Math.random()-.5)*t,(Math.random()-.5)*t),h.position.add(r);var i=Math.random(),m=Math.random(),s=Math.random();h.scale.set(i,m,s),a.add(h),h.castShadow=!0,h.receiveShadow=!0}}var c=new THREE.Geometry;for(d=0;d<a.children.length;d++)a.children[d].updateMatrix(),c.merge(a.children[d].geometry,a.children[d].matrix);for(d=0;d<c.vertices.length;d++){var M=c.vertices[d];M.x+=.1*(Math.random()-.5),M.y+=.1*(Math.random()-.5),M.z+=.1*(Math.random()-.5)}c.computeFaceNormals(),c.computeVertexNormals(),(E=new THREE.Mesh(c,l)).castShadow=!0,E.receiveShadow=!0,VizHandler.getScene().add(E),VizHandler.getRenderer().shadowMap.needsUpdate=!0}function n(){}function t(){}return{init:function(){events.on("update",n),events.on("onBeat",t),THREE.SmoothShading;var e=Assets.getCubeMap(12);e.format=THREE.RGBFormat,l=new THREE.MeshStandardMaterial({bumpScale:.055,metalness:1,fog:!1,roughness:0,shading:THREE.FlatShading,envMap:e}),a()},update:n,onBeat:t,generate:function(){},reload:a}}();
//# sourceMappingURL=Shards.js.map
