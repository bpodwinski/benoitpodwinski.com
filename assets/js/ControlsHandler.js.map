{"version":3,"sources":["ControlsHandler.js"],"names":["ControlsHandler","mainParams","time","auto","fullscreen","document","documentElement","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","Main","toggleControls","generate_one","Asteroid","generate","generate_grid","fxParams","song","nuts","tilt","tv","kaleidoscope","kaleidoscopeJump","rgb","wireframe","dots","person","ssao","ssaoOnly","heart","items","black","animSpeed","colorProgress","spreadProgress","waterProgress","bgProgress","glow","show","trigger","percStart","percFinish","value","changedValue","update","clone","attr","hasOwnProperty","Math","sin","changed","console","log","FXHandler","toggle","init","events","on","audioParams","useMic","useSample","showDebug","volSens","beatHoldTime","beatDecayRate","bpmMode","bpmRate","vizParams","fullSize","showControls","fakeKinect"],"mappings":"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","file":"ControlsHandler.js","sourcesContent":["var ControlsHandler = function () {\n\n    var t = 0;\n\n    var mainParams = {\n        time: 0.0001,\n        auto: false,\n        fullscreen: function () {\n            document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n            Main.toggleControls()\n        },\n        generate_one: function () {\n            Asteroid.generate(0,0)\n        },\n        generate_grid: function () {\n            Asteroid.generate(8,8)\n        }\n    }\n\n    var audioParams = {\n        useMic: false,\n        useSample: false,\n        showDebug: true,\n        volSens: 1,//1,\n        beatHoldTime: 40,\n        beatDecayRate: 0.97,\n        bpmMode: false,\n        bpmRate: 0\n    };\n\n    var fxParams = {\n        song: 0,\n        nuts: false,\n        tilt: true,\n        tv: false,\n        kaleidoscope: -1,\n        kaleidoscopeJump: false,\n        rgb: true,\n        wireframe: false,\n        dots: false,\n        person: false,\n        ssao:true,\n        ssaoOnly:false,\n        heart: true,\n        items: true,\n        black: true,\n        animSpeed: 1.0,\n        colorProgress: 0.0,\n        spreadProgress: 0.0,\n        waterProgress: 0.3,\n        bgProgress: 0.0,\n        glow: 0.3\n    };\n\n    var vizParams = {\n        fullSize: true,\n        showControls: false,\n        fakeKinect: false,\n        // useBars: false,\n        // useGoldShapes: true,\n        // useNebula:true,\n        // useNeonShapes:true,\n        // useStripes:true,\n        // useTunnel:true,\n        // useWaveform:true,\n    };\n\n    function init() {\n        return events.on(\"update\", update);\n    }\n\n    function show(trigger, percStart, percFinish, value) {\n        var changedValue = true;\n        if (typeof value === 'number') {\n            changedValue = value\n        }\n        if (mainParams.time > percStart && mainParams.time <= percFinish) {\n            fxParams[trigger] = changedValue;\n        }\n    }\n\n    function autoChange() {\n        mainParams.auto = true;\n    }\n\n    function manualChange() {\n        mainParams.auto = false;\n        FXHandler.toggle();\n    }\n\n    function update() {\n\n\n        if (mainParams.auto) {\n            mainParams.time += 1 / 3/*hours*/ / 60/*minutes*/ / 60/*seconds*/ / 60/*fps*/;//*60*4;\n            if (mainParams.time > 1)\n                mainParams.time = 1;\n            if (mainParams.time < 0)\n                mainParams.time = 0;\n        }\n\n        var clone = {};\n        for (var attr in fxParams) {\n            if (fxParams.hasOwnProperty(attr)) {\n                clone[attr] = fxParams[attr];\n            }\n        }\n        if (mainParams.auto) {\n            for (var attr in fxParams) {\n                if (fxParams.hasOwnProperty(attr)) {\n                    if (fxParams[attr] === true)\n                        fxParams[attr] = false;\n                }\n            }\n\n            fxParams.waterProgress = Math.sin(3.5 + mainParams.time * 6) / 2 + .5\n            fxParams.colorProgress = mainParams.time\n            fxParams.spreadProgress = mainParams.time\n            //fxParams.bgProgress=mainParams.time\n\n            show('black', 0.07, 0.25)\n            show('bgProgress', 0.00, 0.50, 0)\n            show('bgProgress', 0.50, 1.00, 1)\n\n            show('kaleidoscope', 0.00, 0.09, -1)\n            show('kaleidoscope', 0.13, 0.16, 0)\n            show('kaleidoscope', 0.16, 0.19, 1)\n            show('kaleidoscope', 0.19, 0.24, 4)\n\n            show('heart', 0.00, 0.37)\n            show('heart', 0.43, 1)\n            show('black', 0.30, 0.40)\n            show('spreadProgress', 0.30, 1, 1)\n\n            show('kaleidoscope', 0.24, 0.30, -1)\n            show('kaleidoscope', 0.30, 0.33, 0)\n            show('kaleidoscope', 0.33, 0.36, 1)\n            show('kaleidoscope', 0.36, 0.43, 2)\n\n            show('items', 0.15, 1.00)\n\n            show('animSpeed', 0.17, 0.20, -3)\n            show('animSpeed', 0.20, 0.23, 4)\n            show('animSpeed', 0.23, 0.30, -10)\n            show('animSpeed', 0.53, 0.61, -3)\n            show('animSpeed', 0.61, 0.67, 4)\n            show('animSpeed', 0.67, 0.73, -6)\n            show('animSpeed', 0.73, 0.81, 7)\n            show('animSpeed', 0.81, 0.87, 0)\n            show('animSpeed', 0.91, 1, -10)\n\n            show('kaleidoscope', 0.40, 0.60, -1)\n            show('kaleidoscope', 0.60, 0.65, 0)\n            show('kaleidoscope', 0.65, 0.70, 1)\n            show('kaleidoscope', 0.70, 0.75, 2)\n\n            show('nuts', 0.43, 0.47)\n            show('wireframe', 0.47, 0.57)\n            show('nuts', 0.57, 1.00)\n\n            show('rgb', 0.30, 0.40)\n            show('rgb', 0.70, 1.00)\n\n            show('tv', .65, 1)\n\n            show('kaleidoscopeJump', .75, 1)\n\n        }\n\n        /*show('nuts',.5,1)\n         show('tv',.5,1)\n         show('wireframe',.16,.20)\n         show('wireframe',.33,.38)\n         show('dots',.9,1)\n         show('black',.3,.7)*/\n\n        var changed = false;\n\n        for (var attr in fxParams) {\n            if (clone[attr] != fxParams[attr] && (typeof fxParams[attr] === 'boolean') && attr !== \"heart\" && attr !== \"wireframe\" && attr !== \"items\" && attr !== \"black\" && attr !== \"waterProgress\" && attr !== \"spreadProgress\" && attr !== \"bgProgress\") {\n                changed = true;\n                console.log(attr, fxParams[attr])\n            }\n        }\n        //if(changed)console.log(fxParams.nuts, changed)\n        //if(changed)alert('hi')\n        if (changed)\n            FXHandler.toggle();\n\n    }\n\n    return {\n        init: init,\n        audioParams: audioParams,\n        fxParams: fxParams,\n        vizParams: vizParams\n    };\n}();"]}